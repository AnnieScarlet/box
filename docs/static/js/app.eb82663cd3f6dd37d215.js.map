{"version":3,"sources":["webpack:///./src/pages/Upload.vue","webpack:///./src/pages/User.vue?176c","webpack:///./src/pages/User.vue","webpack:///./src/components/MediaView.vue?ea3f","webpack:///./src/store/index.js","webpack:///src/components/MediaView.vue","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/pages/Upload.vue?d67f","webpack:///src/components/Thumbnail.vue","webpack:///./src/pages/Signin.vue?8b34","webpack:///./src/pages/Signin.vue","webpack:///./src/pages/Browser.vue?55e6","webpack:///./src/components/Footer.vue?1415","webpack:///./src/components/Footer.vue","webpack:///./src/components/Thumbnail.vue","webpack:///./src/router/index.js","webpack:///./src/pages/Browser.vue","webpack:///./src/pages/Signup.vue?9fe2","webpack:///./src/pages/Signup.vue","webpack:///./src/components/Thumbnail.vue?05ba","webpack:///./src/api/index.js","webpack:///./src/components/MediaView.vue","webpack:///./src/pages/Album.vue?eb44","webpack:///./src/pages/Album.vue","webpack:///./src/constants.js","webpack:///src/pages/Upload.vue","webpack:///src/pages/Browser.vue","webpack:///./src/components/Header.vue?b0b0","webpack:///./src/components/Header.vue","webpack:///src/App.vue","webpack:///./src/pages/Settings.vue?68cf","webpack:///./src/pages/Settings.vue","webpack:///./src/App.vue?d93d"],"names":["__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4a631a1e_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Upload_vue__","__webpack_require__","__vue_styles__","ssrContext","Component","normalizeComponent","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Upload_vue___default","a","__webpack_exports__","User","render","_h","this","$createElement","_self","_c","attrs","id","_v","_s","$route","params","staticRenderFns","esExports","media_view_data","src","media_url","_e","_vue2","default","use","_vuex2","MediaView","namespaced","state","mutations","setData","data","getters","getMediaUrl","_constants2","static_url","Store","modules","_vuex","computed","_extends3","mapState","mapGetters","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_426c9c58_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue___default","config","productionTip","el","router","store","template","components","App","_vm","on","submit","$event","preventDefault","staticClass","width","height","url","thumb_url","rect","thumb_rect","type","name","change","onChangeFile","directives","rawName","value","expression","placeholder","domProps","input","target","composing","title","description","x","y","naturalHeight","scale","_scale","Signin","path","_l","post","key","getThumbnailUrl","nativeOn","click","selectMedia","Footer","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0f23325f_hasScoped_true_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Thumbnail_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Thumbnail_vue___default","_vueRouter2","routes","component","meta","requiresAuth","redirect","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_16cd8f1c_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Browser_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Browser_vue___default","Signup","style","load","onLoad","WebResult","Success","_symbol2","ServerError","InvalidRequest","client","_axios2","create","xsrfHeaderName","interceptors","response","_promise2","resolve","error","send","_ref","_asyncToGenerator3","_regenerator2","mark","_callee","method","wrap","_context","prev","next","abrupt","api_url","stop","undefined","_x","_x2","_x3","apply","arguments","get","_ref2","_callee2","_context2","_x4","_ref3","_callee3","_context3","_x5","_x6","getPosts","query","_this","_callee4","_context4","postMediaData","form","_this2","_callee5","_context5","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_612b2ac8_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_MediaView_vue__","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_MediaView_vue___default","Album","IMAGE_QUALITY","THUMBNAIL_BOX_SIZE","WIDTH","HEIGHT","IMAGE_MAX_SIZE","THUMBNAIL_MAX_SIZE","ThumbnailView","updateRect","ctx","resolveRect","_constructor$getPoint","constructor","getPoint","e","canvas","current_rect","min","max","_constructor$getPoint2","p","offsetLeft","offsetTop","HTMLCanvasElement","prototype","toBlob","length","len","i","Thumbnail","_Thumbnail2","_img_url","files","reset","FileReader","file","img","Image","result","_resolveSize","_img_data","previousElementSibling","children","r","_this3","_resolveSize2","FormData","mediaData","posts","Header","to","_MediaView2","AppHeader","_Header2","AppFooter","_Footer2","Settings"],"mappings":"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","file":"static/js/app.eb82663cd3f6dd37d215.js","sourcesContent":["function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4a631a1e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Upload.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Upload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Upload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a631a1e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Upload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Upload.vue\n// module id = 3/Wh\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user\"}},[_vm._v(\"\\n\\tUser  \"+_vm._s(_vm.$route.params.id)+\"\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0557abce\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/User.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0557abce\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./User.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/User.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.media_view_data)?_c('div',{attrs:{\"id\":\"media-view\"}},[_vm._v(\"\\n\\tMedia \"+_vm._s(_vm.media_view_data)+\"\\n\\t\"),_c('img',{attrs:{\"src\":_vm.media_url}})]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-612b2ac8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MediaView.vue\n// module id = Hyim\n// module chunks = 1","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport consts from '@/constants'\n\nVue.use(Vuex)\n\nconst MediaView = {\n  namespaced: true,\n  state: {\n    media_view_data: null\n  },\n  mutations: {\n    setData (state, data) {\n      state.media_view_data = data\n    }\n  },\n  getters: {\n    getMediaUrl (state) {\n      return consts.static_url + state.media_view_data.id\n    }\n  }\n}\n\nexport default new Vuex.Store({\n  modules: { MediaView }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","<template>\n\t<div id=\"media-view\" v-if=\"media_view_data\">\n\t\tMedia {{ media_view_data }}\n\t\t<img v-bind:src=\"media_url\" />\n\t</div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex'\n\nexport default {\n  name: 'media-view',\n  computed: {\n    ...mapState('MediaView', {\n      media_view_data: 'media_view_data'\n    }),\n    ...mapGetters('MediaView', {\n      media_url: 'getMediaUrl'\n    })\n  }\n}\n</script>\n\n<style>\n#media-view img {\n\twidth: 100%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MediaView.vue","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-426c9c58\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-426c9c58\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport store from './store'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"upload\"}},[_vm._v(\"\\n  Upload\\n  \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();_vm.submit($event)}}},[_c('div',[_c('div',[_c('canvas',{staticClass:\"thumbnail\",attrs:{\"width\":\"0\",\"height\":\"0\"}}),_vm._v(\" \"),(_vm.thumb_url)?_c('Thumbnail',{staticClass:\"thumbnail\",attrs:{\"url\":_vm.thumb_url,\"rect\":_vm.thumb_rect}}):_vm._e()],1),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\",\"name\":\"file\"},on:{\"change\":_vm.onChangeFile}})]),_vm._v(\" \"),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],attrs:{\"type\":\"text\",\"name\":\"title\",\"placeholder\":\"title\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value}}})]),_vm._v(\" \"),_c('div',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],attrs:{\"name\":\"description\",\"placeholder\":\"description\"},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.description=$event.target.value}}})]),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"Submit\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4a631a1e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Upload.vue\n// module id = P5Gi\n// module chunks = 1","<template>\n  <div class=\"thumb-wrapper\">\n    <img v-bind:width=\"width\" v-bind:height=\"height\" v-bind:style=\"styleObject\" v-bind:src=\"url\" v-on:load=\"onLoad\" />\n  </div>\n</template>\n\n<script>\nimport consts from '@/constants'\n\nexport default {\n  props: ['url', 'rect'],\n  data () {\n    return {\n      width: 0,\n      height: 0\n    }\n  },\n  computed: {\n    styleObject () {\n      return this.resolvedRect && {\n        left: `-${parseInt(this.resolvedRect.x)}px`,\n        top: `-${parseInt(this.resolvedRect.y)}px`\n      }\n    },\n    resolvedRect () {\n      if (this.rect) {\n        return {\n          x: this.rect.min.x * this.width,\n          y: this.rect.min.y * this.height\n        }\n      } else {\n        return {\n          x: (this.width - consts.THUMBNAIL_BOX_SIZE.WIDTH) * 0.5,\n          y: (this.height - consts.THUMBNAIL_BOX_SIZE.HEIGHT) * 0.5\n        }\n      }\n    }\n  },\n  methods: {\n    onLoad (e) {\n      let img = e.path[0]\n      {\n        // サムネイル画像サイズの調整\n        let scale = consts.THUMBNAIL_MAX_SIZE / Math.max(img.naturalWidth, img.naturalHeight)\n        scale = Math.max(scale, Math.min(consts.THUMBNAIL_BOX_SIZE.WIDTH, consts.THUMBNAIL_BOX_SIZE.HEIGHT) / Math.min(img.naturalWidth, img.naturalHeight))\n        this.width = parseInt(img.naturalWidth * scale)\n        this.height = parseInt(img.naturalHeight * scale)\n      }\n      if (this.rect) {\n        // サムネイル表示矩形の調整\n        let scale = consts.THUMBNAIL_BOX_SIZE.WIDTH / (this.width * (this.rect.max.x - this.rect.min.x))\n        this.width = this.width * scale\n        this.height = this.height * scale\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.thumb-wrapper {\n  width: 200px;\n  height: 200px;\n  overflow: hidden;\n  position: relative;\n}\n.thumb-wrapper img {\n  position: relative;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Thumbnail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"signin\"}},[_vm._v(\"\\n\\tSignin\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ebd45d4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Signin.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ebd45d4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Signin.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Signin.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"index\"}},[_vm._v(\"\\n  Index \"),_c('br'),_vm._v(\"\\n  route name: \"+_vm._s(_vm.$route.name)),_c('br'),_vm._v(\"\\n  route path: \"+_vm._s(_vm.$route.path)),_c('br'),_vm._v(\"\\n  route params: \"+_vm._s(_vm.$route.params[0])),_c('br'),_vm._v(\" \"),_vm._l((_vm.posts),function(post){return _c('Thumbnail',{key:post.id,staticClass:\"thumbnail\",attrs:{\"url\":_vm.getThumbnailUrl(post),\"rect\":post.thumb_rect},nativeOn:{\"click\":function($event){_vm.selectMedia(post)}}})}),_vm._v(\" \"),_c('div',{staticClass:\"clear\"})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-16cd8f1c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Browser.vue\n// module id = TAm3\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('footer',{attrs:{\"id\":\"footer\"}},[_vm._v(\"\\n\\tFooter\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-027db25e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Footer.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-027db25e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Footer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Footer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f23325f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Thumbnail.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Thumbnail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Thumbnail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f23325f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Thumbnail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f23325f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Thumbnail.vue\n// module id = UDkx\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport Browser from '@/pages/Browser'\nimport Album from '@/pages/Album'\nimport Upload from '@/pages/Upload'\nimport User from '@/pages/User'\nimport Settings from '@/pages/Settings'\nimport Signin from '@/pages/Signin'\nimport Signup from '@/pages/Signup'\n\n// import NotFound from '@/pages/NotFound'\n\nVue.use(Router)\n\nexport default new Router({\n  // mode: 'history',  サーバー立てるまで hash\n  routes: [\n    {\n      path: '/',\n      name: 'index',\n      component: Browser\n    },\n    {\n      path: '/-/(.*)',\n      name: 'index-search',\n      component: Browser\n    },\n    {\n      path: '/media/(.*)',\n      name: 'index-view',\n      component: Browser\n    },\n    {\n      path: '/album/(.*)?',\n      name: 'album`',\n      component: Album\n    },\n    {\n      path: '/user/:id',\n      name: 'user`',\n      component: User\n    },\n\n    {\n      path: '/upload',\n      name: 'upload`',\n      component: Upload,\n      meta: { requiresAuth: true }\n    },\n    {\n      path: '/settings',\n      name: 'settings`',\n      component: Settings,\n      meta: { requiresAuth: true }\n    },\n\n    {\n      path: '/signin',\n      name: 'signin`',\n      component: Signin\n    },\n    {\n      path: '/signup',\n      name: 'signup`',\n      component: Signup\n    },\n\n    {\n      path: '*',\n      // name: 'notfound`',\n      // component: NotFound\n      redirect: { path: '/' }\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16cd8f1c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Browser.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Browser.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Browser.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16cd8f1c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Browser.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Browser.vue\n// module id = ePs1\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"signup\"}},[_vm._v(\"\\n\\tSignup\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-62340768\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Signup.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-62340768\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Signup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Signup.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"thumb-wrapper\"},[_c('img',{style:(_vm.styleObject),attrs:{\"width\":_vm.width,\"height\":_vm.height,\"src\":_vm.url},on:{\"load\":_vm.onLoad}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f23325f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Thumbnail.vue\n// module id = gxHb\n// module chunks = 1","import axios from 'axios'\nimport consts from '@/constants'\n\nconst WebResult = {\n  Success: Symbol(''),\n  ServerError: Symbol(''),\n  InvalidRequest: Symbol('')\n}\n\nconst client = axios.create({\n  xsrfHeaderName: 'X-CSRF-Token'\n  // withCredentials: true   // @TODO: CORS でエラーになるので一旦外す、 CSRF は別途実装\n})\n\nclient.interceptors.response.use((response) => {\n  return Promise.resolve({\n    data: response.data\n  })\n}, (error) => {\n  return Promise.resolve({\n    error: error.response\n  })\n})\n\nconst send = async (method, path, data) => {\n  return method(consts.api_url + path, data)\n}\n\nconst get = async (path) => {\n  return send(client.get, path)\n}\nconst post = async (path, data) => {\n  return send(client.post, path, data)\n}\n\nexport default {\n  WebResult,\n  async getPosts (query) {\n    return get('/media/list')\n  },\n\n  async postMediaData (form) {\n    return post('/media/create', form)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/index.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-612b2ac8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MediaView.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MediaView.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MediaView.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-612b2ac8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MediaView.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MediaView.vue\n// module id = h8cK\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"album\"}},[_vm._v(\"\\n\\tAlbum \"+_vm._s(_vm.$route.params[0])+\"\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-66c41b10\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Album.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-66c41b10\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Album.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Album.vue\n// module id = null\n// module chunks = ","// @TODO: consts ファイルをビルド時に切り替えたい\n\nexport default {\n  static_url: 'https://s3-ap-northeast-1.amazonaws.com/eorzeabox-dev/',\n  api_url: 'http://ec2-13-230-136-157.ap-northeast-1.compute.amazonaws.com',\n  // api_url: 'http://localhost:8000',\n\n  IMAGE_QUALITY: 0.6,\n  THUMBNAIL_BOX_SIZE: { WIDTH: 200, HEIGHT: 200 },\n  IMAGE_MAX_SIZE: 1280,\n  THUMBNAIL_MAX_SIZE: 250\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","<template>\n  <div id=\"upload\">\n    Upload\n    <form v-on:submit.prevent=\"submit\">\n      <div>\n        <div>\n          <canvas class=\"thumbnail\" width=\"0\" height=\"0\"></canvas>\n          <Thumbnail class=\"thumbnail\" v-if=\"thumb_url\" v-bind:url=\"thumb_url\" v-bind:rect=\"thumb_rect\" />\n        </div>\n        <input type=\"file\" name=\"file\" v-on:change=\"onChangeFile\">\n      </div>\n      <div>\n        <input type=\"text\" name=\"title\" v-model=\"title\" placeholder=\"title\" />\n      </div>\n      <div>\n        <textarea name=\"description\" v-model=\"description\" placeholder=\"description\"></textarea>\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport consts from '@/constants'\nimport api from '@/api'\nimport Thumbnail from '@/components/Thumbnail'\n\nclass ThumbnailView {\n  constructor (canvas, width, height, data, updateRect) {\n    this.update_rect = updateRect\n\n    this.width = width\n    this.height = height\n\n    // デフォルト矩形の起点\n    let pivot = {\n      x: parseInt(width / 2 - consts.THUMBNAIL_BOX_SIZE.WIDTH / 2),\n      y: parseInt(height / 2 - consts.THUMBNAIL_BOX_SIZE.HEIGHT / 2)\n    }\n\n    this.dragging = false\n    this.begin_point = {x: 0, y: 0}\n    this.current_rect = {\n      min: {x: pivot.x, y: pivot.y},\n      max: {x: pivot.x + consts.THUMBNAIL_BOX_SIZE.WIDTH, y: pivot.y + consts.THUMBNAIL_BOX_SIZE.HEIGHT}\n    }\n\n    let ctx = canvas.getContext('2d')\n\n    canvas.width = width\n    canvas.height = height\n    canvas.style.backgroundImage = `url(\"${data}\")`\n    canvas.style.backgroundSize = '100%'\n\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.4)'\n    ctx.strokeStyle = 'red'\n\n    canvas.addEventListener('mousedown', (e) => this.onMouseDown(e, canvas, ctx), false)\n    canvas.addEventListener('mouseup', (e) => this.onMouseUp(e, canvas, ctx), false)\n    canvas.addEventListener('mousemove', (e) => this.onMouseMove(e, canvas, ctx), false)\n\n    this.draw(canvas, ctx)\n  }\n  // 矩形の値を 0 ~ 1.0 の値にして返す\n  get rect () {\n    return {\n      min: {x: this.current_rect.min.x / this.width, y: this.current_rect.min.y / this.height},\n      max: {x: this.current_rect.max.x / this.width, y: this.current_rect.max.y / this.height}\n    }\n  }\n  // canvas の左上 を起点としたカーソル位置を返す\n  static getPoint (e, canvas) {\n    return {\n      x: parseInt(e.clientX - canvas.offsetLeft),\n      y: parseInt(e.clientY - canvas.offsetTop)\n    }\n  }\n  // canvas からはみ出た矩形の位置を解決する\n  resolveRect () {\n    if (this.current_rect.min.x < 0) {\n      this.current_rect.max.x -= this.current_rect.min.x\n      this.current_rect.min.x = 0\n    }\n    if (this.current_rect.min.y < 0) {\n      this.current_rect.max.y -= this.current_rect.min.y\n      this.current_rect.min.y = 0\n    }\n    if (this.current_rect.max.x > this.width) {\n      this.current_rect.min.x -= this.current_rect.max.x - this.width\n      this.current_rect.max.x = this.width\n    }\n    if (this.current_rect.max.y > this.height) {\n      this.current_rect.min.y -= this.current_rect.max.y - this.height\n      this.current_rect.max.y = this.height\n    }\n  }\n  // 矩形のスケールを変更\n  setScale (scale) {\n    if (this.width * scale < consts.THUMBNAIL_BOX_SIZE.WIDTH) {\n      scale = consts.THUMBNAIL_BOX_SIZE.WIDTH / this.width\n    }\n    if (this.height * scale < consts.THUMBNAIL_BOX_SIZE.HEIGHT) {\n      scale = consts.THUMBNAIL_BOX_SIZE.HEIGHT / this.height\n    }\n    let size = {w: this.current_rect.max.x - this.current_rect.min.x, h: this.current_rect.max.y - this.current_rect.min.y}\n    let pivot = {x: this.current_rect.min.x + size.w / 2, y: this.current_rect.min.y + size.h / 2}\n    let x = consts.THUMBNAIL_BOX_SIZE.WIDTH * (1.0 / scale) / 2\n    let y = consts.THUMBNAIL_BOX_SIZE.HEIGHT * (1.0 / scale) / 2\n    this.current_rect = {\n      min: {x: pivot.x - x, y: pivot.y - y},\n      max: {x: pivot.x + x, y: pivot.y + y}\n    }\n    this.resolveRect()\n  }\n  onMouseDown (e, canvas, ctx) {\n    if (this.dragging) {\n      return\n    }\n\n    let { x, y } = this.constructor.getPoint(e, canvas)\n\n    if (this.current_rect.min.x <= x && x <= this.current_rect.max.x &&\n        this.current_rect.min.y <= y && y <= this.current_rect.max.y) {\n      this.dragging = true\n      this.begin_point = {x: x - this.current_rect.min.x, y: y - this.current_rect.min.y}\n    }\n  }\n  onMouseUp (e, canvas, ctx) {\n    this.dragging = false\n  }\n  onMouseMove (e, canvas, ctx) {\n    if (!this.dragging) {\n      return\n    }\n\n    let { x, y } = this.constructor.getPoint(e, canvas)\n\n    let p = {\n      x: x - this.begin_point.x,\n      y: y - this.begin_point.y\n    }\n    this.current_rect = {\n      min: p,\n      max: {\n        x: this.current_rect.max.x - (this.current_rect.min.x - p.x),\n        y: this.current_rect.max.y - (this.current_rect.min.y - p.y)\n      }\n    }\n\n    // canvas 外へは矩形を移動しない\n    if (this.current_rect.min.x < 0) {\n      this.begin_point.x = x\n    }\n    if (this.current_rect.max.x > this.width) {\n      this.begin_point.x = x - (this.width - (this.current_rect.max.x - this.current_rect.min.x))\n    }\n    if (this.current_rect.min.y < 0) {\n      this.begin_point.y = y\n    }\n    if (this.current_rect.max.y > this.height) {\n      this.begin_point.y = y - (this.height - (this.current_rect.max.y - this.current_rect.min.y))\n    }\n\n    this.resolveRect()\n    this.draw(canvas, ctx)\n  }\n  draw (canvas, ctx) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n    ctx.fillRect(0, 0, canvas.width, canvas.height)\n    ctx.clearRect(this.current_rect.min.x, this.current_rect.min.y, this.current_rect.max.x - this.current_rect.min.x, this.current_rect.max.y - this.current_rect.min.y)\n    ctx.strokeRect(this.current_rect.min.x, this.current_rect.min.y, this.current_rect.max.x - this.current_rect.min.x, this.current_rect.max.y - this.current_rect.min.y)\n    this.update_rect(this.rect)\n  }\n}\n\nif (!HTMLCanvasElement.prototype.toBlob) {\n  Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n    value: (callback, type, quality) => {\n      let binStr = atob(this.toDataURL(type, quality).split(',')[1])\n      let len = binStr.length\n      let arr = new Uint8Array(len)\n\n      for (var i = 0; i < len; i++) {\n        arr[i] = binStr.charCodeAt(i)\n      }\n\n      callback(new Blob([arr], {type: type || 'image/png'}))\n    }\n  })\n}\n\nexport default {\n  components: { Thumbnail },\n  data () {\n    return {\n      thumb_url: null,\n      thumb_rect: null,\n      title: null,\n      description: null\n    }\n  },\n  methods: {\n    reset () {\n      this._img_data = null\n      if (this._img_url) {\n        URL.revokeObjectURL(this._img_url)\n      }\n    },\n    onChangeFile (e) {\n      let files = e.target.files\n      if (files.length === 0) {\n        return\n      }\n\n      let file = files[0]\n      let type = file.type.split('/', 2)[0]\n      if (type !== 'image') {\n        return\n      }\n\n      this.reset()\n\n      let vm = this\n      let reader = new FileReader()\n      reader.readAsDataURL(file)\n      reader.onload = async () => {\n        let img = new Image()\n        img.src = reader.result\n        img.onload = async () => {\n          let { width, height } = this.resolveSize(img.width, img.height, consts.THUMBNAIL_MAX_SIZE, consts.THUMBNAIL_MAX_SIZE)\n\n          vm._img_data = await this.resize(img, consts.IMAGE_MAX_SIZE)\n          vm._img_url = URL.createObjectURL(vm._img_data)\n          vm.thumb_url = vm._img_url\n\n          this._thumbnail_view = new ThumbnailView(\n              e.target.previousElementSibling.children[0],  // canvas element\n              width, height, vm._img_url, (rect) => { vm.thumb_rect = rect })\n        }\n      }\n    },\n    resolveSize (width, height, max, min) {\n      let calc = (exp, ratio) => {\n        let r = ratio(exp(width, height))\n        width *= r\n        height *= r\n      }\n      if (max) {\n        calc(Math.max, (x) => x > max ? max / x : 1)\n      }\n      if (min) {\n        calc(Math.min, (x) => x < min ? min / x : 1)\n      }\n      return { width, height }\n    },\n    async resize (src, max, tmp) {\n      let { width, height } = this.resolveSize(src.width, src.height, max)\n      tmp = tmp || document.createElement('canvas')\n      let ctx = tmp.getContext('2d')\n\n      // 急激に縮小するとかなりギザる\n      // if (width / src.width <= 0.5) {\n      //   tmp.width = src.width * 0.5\n      //   tmp.height = src.height * 0.5\n      //   ctx.drawImage(src, 0, 0, tmp.width, tmp.height)\n      //   return await this.resize(tmp, max, src.getContext && src)\n      // }\n\n      tmp.width = width\n      tmp.height = height\n      ctx.drawImage(src, 0, 0, width, height)\n\n      return new Promise((resolve, reject) => {\n        tmp.toBlob(resolve, 'image/jpeg', consts.IMAGE_QUALITY)\n      })\n    },\n    submit (e) {\n      let data = new FormData()\n      data.append('title', this.title)\n      data.append('description', this.description)\n      data.append('file', this._img_data)\n      api.postMediaData(data)\n    }\n  },\n  destroyed () {\n    this.reset()\n  }\n}\n</script>\n\n<style>\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Upload.vue","<template>\n  <div id=\"index\">\n    Index <br>\n    route name: {{ $route.name }}<br>\n    route path: {{ $route.path }}<br>\n    route params: {{ $route.params[0] }}<br>\n\n    <Thumbnail class=\"thumbnail\" v-for=\"post in posts\" v-bind:url=\"getThumbnailUrl(post)\" v-bind:rect=\"post.thumb_rect\" v-bind:key=\"post.id\" v-on:click.native=\"selectMedia(post)\" />\n    <div class=\"clear\"/>\n  </div>\n</template>\n\n<script>\nimport consts from '@/constants'\nimport api from '@/api'\nimport Thumbnail from '@/components/Thumbnail'\n\nexport default {\n  name: 'index',\n  components: { Thumbnail },\n  data () {\n    return {\n      posts: []\n    }\n  },\n  methods: {\n    getThumbnailUrl (mediaData) {\n      return consts.static_url + mediaData.id\n    },\n    selectMedia (mediaData) {\n      this.$router.push({path: `/media/${mediaData.id}`})\n      this.$store.commit('MediaView/setData', mediaData)\n    }\n  },\n\n  beforeCreate () {\n     // URL PATH を処理\n\n    if (this.$route.name === 'index-view') {\n      // 表示していた投稿があった\n      (async () => {\n        this.$store.commit('MediaView/setData', { id: this.$route.params[0] })\n      })()\n    }\n\n    // 投稿リストを作る\n    let query = ''\n\n    if (this.$route.name === 'index-search') {\n      query = this.$route.params[0]\n    }\n\n    (async () => {\n      let posts = []\n      let {data, error} = await api.getPosts(query)\n      if (!error) {\n        data.forEach((x) => posts.push({ id: x }))\n        this.posts = posts\n      }\n    })()\n  }\n}\n</script>\n\n<style>\n#index .thumbnail {\n  float: left;\n}\n#index .clear {\n  clear: both;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Browser.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{attrs:{\"id\":\"app-header\"}},[_vm._v(\"\\n\\tHeader\\n\\t\"),_c('nav',[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Home\")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":\"/upload\"}},[_vm._v(\"Upload\")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":\"/album\"}},[_vm._v(\"Album\")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":\"/settings\"}},[_vm._v(\"Settings\")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":\"/signin\"}},[_vm._v(\"Signin\")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":\"/signup\"}},[_vm._v(\"Signup\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5d088f0a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Header.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d088f0a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Header.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Header.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <app-header />\n    <router-view />\n    <media-view />\n    <app-footer />\n  </div>\n</template>\n\n<script>\nimport MediaView from '@/components/MediaView'\nimport AppHeader from '@/components/Header'\nimport AppFooter from '@/components/Footer'\n\nexport default {\n  name: 'app',\n  components: {\n    MediaView,\n    AppHeader,\n    AppFooter\n  }\n}\n</script>\n\n<style>\n/*\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n*/\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"settings\"}},[_vm._v(\"\\n\\tSettings\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-79c31377\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Settings.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-79c31377\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Settings.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Settings.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('app-header'),_vm._v(\" \"),_c('router-view'),_vm._v(\" \"),_c('media-view'),_vm._v(\" \"),_c('app-footer')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-426c9c58\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = zWi8\n// module chunks = 1"],"sourceRoot":""}