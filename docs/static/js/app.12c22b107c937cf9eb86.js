webpackJsonp([2],{"/a4O":function(t,e){},"35em":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"user"}},[this._v("\n\tUser  "+this._s(this.$route.params.id)+"\n")])},staticRenderFns:[]},r=n("VU/8")(null,i,!1,null,null,null);e.default=r.exports},BmbF:function(t,e,n){"use strict";var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"container"}},[e("app-header",{attrs:{id:"header"}}),this._v(" "),e("router-view",{attrs:{id:"contents"}}),this._v(" "),e("app-footer",{attrs:{id:"footer"}}),this._v(" "),e("media-view",{attrs:{id:"media-view"}})],1)},staticRenderFns:[]};e.a=i},IKuc:function(t,e){},IcnI:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("7+uW")),a=i(n("NYxO")),s=i(n("oiih"));r.default.use(a.default);var u={namespaced:!0,state:{media_view_data:null},mutations:{setData:function(t,e){t.media_view_data=e}},getters:{getMediaUrl:function(t){return s.default.static_url+t.media_view_data.id}}};e.default=new a.default.Store({modules:{MediaView:u}})},KEeB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n("Dd8w")),r=n("NYxO");e.default={name:"media-view",computed:(0,i.default)({},(0,r.mapState)("MediaView",{media_view_data:"media_view_data"}),(0,r.mapGetters)("MediaView",{media_url:"getMediaUrl"})),methods:{onClose:function(){this.$router.go(-1),this.$store.commit("MediaView/setData",null)}}}},M0tk:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.media_view_data?n("div",{staticClass:"view",on:{click:function(e){e.preventDefault(),t.onClose(e)}}},[t._v("\n  Media "+t._s(t.media_view_data)+"\n  "),n("img",{attrs:{src:t.media_url}})]):t._e()},staticRenderFns:[]};e.a=i},M93x:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("xJD8"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var s=n("BmbF"),u=function(t){n("/a4O")},o=n("VU/8")(r.a,s.a,!1,u,null,null);e.default=o.exports},N3Rh:function(t,e){},NHnr:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=i(n("7+uW")),a=i(n("M93x")),s=i(n("YaEn")),u=i(n("IcnI"));r.default.config.productionTip=!1,new r.default({el:"#app",router:s.default,store:u.default,template:"<App/>",components:{App:a.default}})},PDMd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t&&t.__esModule?t:{default:t}}(n("oiih"));e.default={props:["url","rect"],data:function(){return{width:0,height:0}},computed:{styleObject:function(){return this.resolvedRect&&{left:"-"+parseInt(this.resolvedRect.x)+"px",top:"-"+parseInt(this.resolvedRect.y)+"px"}},resolvedRect:function(){return this.rect?{x:this.rect.min.x*this.width,y:this.rect.min.y*this.height}:{x:.5*(this.width-i.default.THUMBNAIL_BOX_SIZE.WIDTH),y:.5*(this.height-i.default.THUMBNAIL_BOX_SIZE.HEIGHT)}}},methods:{onLoad:function(t){var e=t.path[0],n=i.default.THUMBNAIL_MAX_SIZE/Math.max(e.naturalWidth,e.naturalHeight);if(n=Math.max(n,Math.min(i.default.THUMBNAIL_BOX_SIZE.WIDTH,i.default.THUMBNAIL_BOX_SIZE.HEIGHT)/Math.min(e.naturalWidth,e.naturalHeight)),this.width=parseInt(e.naturalWidth*n),this.height=parseInt(e.naturalHeight*n),this.rect){var r=i.default.THUMBNAIL_BOX_SIZE.WIDTH/(this.width*(this.rect.max.x-this.rect.min.x));this.width=this.width*r,this.height=this.height*r}}}}},"SM+w":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"signin"}},[this._v("\n\tSignin\n")])},staticRenderFns:[]},r=n("VU/8")(null,i,!1,null,null,null);e.default=r.exports},TVmP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement;return(this._self._c||t)("footer",{attrs:{id:"footer"}},[this._v("\n\tFooter\n")])},staticRenderFns:[]},r=n("VU/8")(null,i,!1,null,null,null);e.default=r.exports},UDkx:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("PDMd"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var s=n("gxHb"),u=function(t){n("IKuc")},o=n("VU/8")(r.a,s.a,!1,u,"data-v-0f23325f",null);e.default=o.exports},YaEn:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("7+uW")),a=i(n("/ocq")),s=i(n("ePs1")),u=i(n("hGuZ")),o=i(n("35em")),l=i(n("yYi4")),d=i(n("SM+w")),c=i(n("fb+x"));r.default.use(a.default);var f=new a.default({routes:[{path:"/",name:"index",component:s.default},{path:"/-/(.*)",name:"index-search",component:s.default},{path:"/media/(.*)",name:"index-view",component:s.default},{path:"/album/(.*)?",name:"album`",component:u.default},{path:"/user/:id",name:"user`",component:o.default},{path:"/upload",name:"upload`",component:function(){return n.e(0).then(n.bind(null,"3/Wh"))},meta:{requiresAuth:!0}},{path:"/settings",name:"settings`",component:l.default,meta:{requiresAuth:!0}},{path:"/signin",name:"signin`",component:d.default},{path:"/signup",name:"signup`",component:c.default},{path:"*",redirect:{path:"/"}}]});e.default=f},ePs1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("t/xc"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var s=n("pDoN"),u=function(t){n("N3Rh")},o=n("VU/8")(r.a,s.a,!1,u,"data-v-414b4f07",null);e.default=o.exports},"fb+x":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"signup"}},[this._v("\n\tSignup\n")])},staticRenderFns:[]},r=n("VU/8")(null,i,!1,null,null,null);e.default=r.exports},gjkF:function(t,e){},gxHb:function(t,e,n){"use strict";var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"thumb-wrapper"},[e("img",{style:this.styleObject,attrs:{width:this.width,height:this.height,src:this.url},on:{load:this.onLoad}})])},staticRenderFns:[]};e.a=i},gyMJ:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("Xxa5")),a=i(n("exGp")),s=i(n("//Fk")),u=i(n("5QVw")),o=i(n("mtWM")),l=i(n("oiih")),d={Success:(0,u.default)(""),ServerError:(0,u.default)(""),InvalidRequest:(0,u.default)("")},c=o.default.create({xsrfHeaderName:"X-CSRF-Token"});c.interceptors.response.use(function(t){return s.default.resolve({data:t.data})},function(t){return s.default.resolve({error:t.response})});var f=function(){var t=(0,a.default)(r.default.mark(function t(e,n,i){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(l.default.api_url+n,i));case 1:case"end":return t.stop()}},t,void 0)}));return function(e,n,i){return t.apply(this,arguments)}}(),h=function(){var t=(0,a.default)(r.default.mark(function t(e){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f(c.get,e));case 1:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=(0,a.default)(r.default.mark(function t(e,n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f(c.post,e,n));case 1:case"end":return t.stop()}},t,void 0)}));return function(e,n){return t.apply(this,arguments)}}();e.default={WebResult:d,getPosts:function(t){var e=this;return(0,a.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h("/media/list"));case 1:case"end":return t.stop()}},t,e)}))()},postMediaData:function(t){var e=this;return(0,a.default)(r.default.mark(function n(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p("/media/create",t));case 1:case"end":return e.stop()}},n,e)}))()}}},h8cK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("KEeB"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);var s=n("M0tk"),u=function(t){n("gjkF")},o=n("VU/8")(r.a,s.a,!1,u,"data-v-3ed06ad4",null);e.default=o.exports},hGuZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"album"}},[this._v("\n\tAlbum "+this._s(this.$route.params[0])+"\n")])},staticRenderFns:[]},r=n("VU/8")(null,i,!1,null,null,null);e.default=r.exports},oiih:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={static_url:"https://s3-ap-northeast-1.amazonaws.com/eorzeabox-dev/",api_url:"http://ec2-13-230-136-157.ap-northeast-1.compute.amazonaws.com",IMAGE_QUALITY:.6,THUMBNAIL_BOX_SIZE:{WIDTH:200,HEIGHT:200},IMAGE_MAX_SIZE:1280,THUMBNAIL_MAX_SIZE:250}},pDoN:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thumbnail-browser",on:{scroll:t.onScroll}},[n("div",{attrs:{id:"index-info"}},[t._v("\n    Index "),n("br"),t._v("\n    route name: "+t._s(t.$route.name)),n("br"),t._v("\n    route path: "+t._s(t.$route.path)),n("br"),t._v("\n    route params: "+t._s(t.$route.params[0])),n("br")]),t._v(" "),n("div",{style:t.styleObject,attrs:{id:"index-posts"}},t._l(t.displayItems,function(e){return n("Thumbnail",{key:e.id,staticClass:"thumbnail",attrs:{url:t.getThumbnailUrl(e),rect:e.thumb_rect},nativeOn:{click:function(n){t.selectMedia(e)}}})})),t._v(" "),n("div",{staticClass:"clear"})])},staticRenderFns:[]};e.a=i},"t/xc":function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("Xxa5")),a=i(n("exGp")),s=i(n("oiih")),u=i(n("gyMJ")),o=i(n("UDkx"));e.default={name:"index",components:{Thumbnail:o.default},data:function(){return{posts:[],index:0,scroll_y:0,info_height:0,item_size:null,visible_size:null}},computed:{displayXY:function(){return{x:parseInt(this.visible_size.width/this.item_size.width)+0,y:parseInt(this.visible_size.height/this.item_size.height)+2}},displayItems:function(){if(0!==this.posts.length){if(!this.item_size)return this.posts.slice(0,10);var t=this.scroll_y-this.info_height;return t<0&&(t=0),this.index=parseInt(t/this.item_size.height)*this.displayXY.x,this.posts.slice(this.index,this.index+this.displayXY.x*this.displayXY.y)}},styleObject:function(){if(this.item_size){var t=Math.ceil(this.posts.length/this.displayXY.x)*this.item_size.height,e=Math.ceil(this.index/this.displayXY.x)*this.item_size.height;return{paddingTop:e+"px",paddingBottom:t-e-this.displayXY.y*this.item_size.height+"px"}}}},methods:{getThumbnailUrl:function(t){return s.default.static_url+t.id},selectMedia:function(t){this.$router.push({path:"/media/"+t.id}),this.$store.commit("MediaView/setData",t)},onScroll:function(t){this.scroll_y=t.target.scrollTop,t.target.scrollTop,t.target.offsetHeight,t.target.scrollHeight}},updated:function(){if(!this.item_size){var t=document.getElementById("index-posts");if(t.children.length>0){var e=t.children[0];this.item_size={width:e.offsetWidth,height:e.offsetHeight}}}},mounted:function(){var t=this;this.info_height=document.getElementById("index-info").offsetHeight;var e=function(){t.visible_size={width:t.$el.offsetWidth,height:t.$el.offsetHeight}};window.addEventListener("resize",e,!1),e()},beforeCreate:function(){var t=this;"index-view"===this.$route.name&&(0,a.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.commit("MediaView/setData",{id:t.$route.params[0]});case 1:case"end":return e.stop()}},e,t)}))();var e="";"index-search"===this.$route.name&&(e=this.$route.params[0]),(0,a.default)(r.default.mark(function n(){var i,a,s;return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=[],n.next=3,u.default.getPosts(e);case 3:a=n.sent,s=a.data,a.error||(s.forEach(function(t){return i.push({id:t})}),t.posts=i);case 7:case"end":return n.stop()}},n,t)}))()}}},teIl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("header",{attrs:{id:"app-header"}},[this._v("\n\tHeader\n\t"),e("nav",[e("router-link",{attrs:{to:"/"}},[this._v("Home")]),this._v(" "),e("router-link",{attrs:{to:"/upload"}},[this._v("Upload")]),this._v(" "),e("router-link",{attrs:{to:"/album"}},[this._v("Album")]),this._v(" "),e("router-link",{attrs:{to:"/settings"}},[this._v("Settings")]),this._v(" "),e("router-link",{attrs:{to:"/signin"}},[this._v("Signin")]),this._v(" "),e("router-link",{attrs:{to:"/signup"}},[this._v("Signup")])],1)])},staticRenderFns:[]},r=n("VU/8")(null,i,!1,null,null,null);e.default=r.exports},xJD8:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n("h8cK")),a=i(n("teIl")),s=i(n("TVmP"));e.default={name:"app",components:{MediaView:r.default,AppHeader:a.default,AppFooter:s.default},methods:{fixMargin:function(){var t=document.getElementById("contents");t.style.marginTop=this._header.offsetHeight+"px",t.style.marginBottom=this._footer.offsetHeight+"px"}},mounted:function(){this._header=document.getElementById("header"),this._footer=document.getElementById("footer"),window.addEventListener("resize",this.fixMargin,!1),this.fixMargin()},updated:function(){this.fixMargin()}}},yYi4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"settings"}},[this._v("\n\tSettings\n")])},staticRenderFns:[]},r=n("VU/8")(null,i,!1,null,null,null);e.default=r.exports}},["NHnr"]);
//# sourceMappingURL=app.12c22b107c937cf9eb86.js.map