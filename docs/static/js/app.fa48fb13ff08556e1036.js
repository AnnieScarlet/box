webpackJsonp([1],{"3/Wh":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("ragk"),i=r.n(n);for(var a in n)"default"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var u=r("Lc5u"),s=function(t){r("8KKG")},c=r("VU/8")(i.a,u.a,!1,s,null,null);e.default=c.exports},"35em":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"user"}},[this._v("\n\tUser  "+this._s(this.$route.params.id)+"\n")])},staticRenderFns:[]},i=r("VU/8")(null,n,!1,null,null,null);e.default=i.exports},"8KKG":function(t,e){},Crn9:function(t,e){},Dtn4:function(t,e){},Hyim:function(t,e,r){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return this.media_view_data?e("div",{attrs:{id:"media-view"}},[this._v("\n\tMedia "+this._s(this.media_view_data)+"\n\t"),e("img",{attrs:{src:this.media_url}})]):this._e()},staticRenderFns:[]};e.a=n},IcnI:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r("7+uW")),a=n(r("NYxO")),u=n(r("oiih"));i.default.use(a.default);var s={namespaced:!0,state:{media_view_data:null},mutations:{setData:function(t,e){t.media_view_data=e}},getters:{getMediaUrl:function(t){return u.default.static_url+t.media_view_data.id}}};e.default=new a.default.Store({modules:{MediaView:s}})},KEeB:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r("Dd8w")),i=r("NYxO");e.default={name:"media-view",computed:(0,n.default)({},(0,i.mapState)("MediaView",{media_view_data:"media_view_data"}),(0,i.mapGetters)("MediaView",{media_url:"getMediaUrl"}))}},Lc5u:function(t,e,r){"use strict";var n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"upload"}},[t._v("\n  Upload\n      "),r("form",{on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[r("div",[t._m(0),t._v(" "),r("input",{attrs:{type:"file",name:"file"},on:{change:t.onChangeFile}})]),t._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"title",placeholder:"title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),r("div",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{name:"description",placeholder:"description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),r("button",{attrs:{type:"submit"}},[t._v("Submit")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{staticClass:"thumbnail",attrs:{width:"0",height:"0"}}),this._v(" "),e("div",{staticClass:"preview"},[e("img")])])}]};e.a=n},M93x:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("xJD8"),i=r.n(n);for(var a in n)"default"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var u=r("zWi8"),s=function(t){r("Dtn4")},c=r("VU/8")(i.a,u.a,!1,s,null,null);e.default=c.exports},NHnr:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=n(r("7+uW")),a=n(r("M93x")),u=n(r("YaEn")),s=n(r("IcnI"));i.default.config.productionTip=!1,new i.default({el:"#app",router:u.default,store:s.default,template:"<App/>",components:{App:a.default}})},"SM+w":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"signin"}},[this._v("\n\tSignin\n")])},staticRenderFns:[]},i=r("VU/8")(null,n,!1,null,null,null);e.default=i.exports},TVmP:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement;return(this._self._c||t)("footer",{attrs:{id:"footer"}},[this._v("\n\tFooter\n")])},staticRenderFns:[]},i=r("VU/8")(null,n,!1,null,null,null);e.default=i.exports},YaEn:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r("7+uW")),a=n(r("/ocq")),u=n(r("ePs1")),s=n(r("hGuZ")),c=n(r("3/Wh")),o=n(r("35em")),l=n(r("yYi4")),d=n(r("SM+w")),h=n(r("fb+x"));i.default.use(a.default),e.default=new a.default({routes:[{path:"/",name:"index",component:u.default},{path:"/-/(.*)",name:"index-search",component:u.default},{path:"/media/(.*)",name:"index-view",component:u.default},{path:"/album/(.*)?",name:"album`",component:s.default},{path:"/user/:id",name:"user`",component:o.default},{path:"/upload",name:"upload`",component:c.default,meta:{requiresAuth:!0}},{path:"/settings",name:"settings`",component:l.default,meta:{requiresAuth:!0}},{path:"/signin",name:"signin`",component:d.default},{path:"/signup",name:"signup`",component:h.default},{path:"*",redirect:{path:"/"}}]})},ePs1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("t/xc"),i=r.n(n);for(var a in n)"default"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var u=r("s9ae"),s=function(t){r("kd6t")},c=r("VU/8")(i.a,u.a,!1,s,null,null);e.default=c.exports},"fb+x":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"signup"}},[this._v("\n\tSignup\n")])},staticRenderFns:[]},i=r("VU/8")(null,n,!1,null,null,null);e.default=i.exports},gyMJ:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r("Xxa5")),a=n(r("exGp")),u=n(r("//Fk")),s=n(r("5QVw")),c=n(r("mtWM")),o=n(r("oiih")),l={Success:(0,s.default)(""),ServerError:(0,s.default)(""),InvalidRequest:(0,s.default)("")},d=c.default.create({xsrfHeaderName:"X-CSRF-Token"});d.interceptors.response.use(function(t){return u.default.resolve({data:t.data})},function(t){return u.default.resolve({error:t.response})});var h=function(){var t=(0,a.default)(i.default.mark(function t(e,r,n){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(o.default.api_url+r,n));case 1:case"end":return t.stop()}},t,void 0)}));return function(e,r,n){return t.apply(this,arguments)}}(),f=function(){var t=(0,a.default)(i.default.mark(function t(e){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h(d.get,e));case 1:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=(0,a.default)(i.default.mark(function t(e,r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h(d.post,e,r));case 1:case"end":return t.stop()}},t,void 0)}));return function(e,r){return t.apply(this,arguments)}}();e.default={WebResult:l,getPosts:function(t){var e=this;return(0,a.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f("/media/list"));case 1:case"end":return t.stop()}},t,e)}))()},postMediaData:function(t){var e=this;return(0,a.default)(i.default.mark(function r(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m("/media/create",t));case 1:case"end":return e.stop()}},r,e)}))()}}},h8cK:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("KEeB"),i=r.n(n);for(var a in n)"default"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var u=r("Hyim"),s=function(t){r("Crn9")},c=r("VU/8")(i.a,u.a,!1,s,null,null);e.default=c.exports},hGuZ:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"album"}},[this._v("\n\tAlbum "+this._s(this.$route.params[0])+"\n")])},staticRenderFns:[]},i=r("VU/8")(null,n,!1,null,null,null);e.default=i.exports},kd6t:function(t,e){},oiih:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={static_url:"https://s3-ap-northeast-1.amazonaws.com/eorzeabox-dev/",api_url:"http://ec2-13-230-136-157.ap-northeast-1.compute.amazonaws.com"}},ragk:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r("//Fk")),a=n(r("Xxa5")),u=n(r("exGp")),s=n(r("Zrlr")),c=n(r("wxAW")),o=n(r("gyMJ")),l={WIDTH:200,HEIGHT:200},d=function(){function t(e,r,n,i,a){var u=this;(0,s.default)(this,t),this.preview=a,this.width=r,this.height=n;var c={x:parseInt(r/2-l.WIDTH/2),y:parseInt(n/2-l.HEIGHT/2)};this.dragging=!1,this.begin_point={x:0,y:0},this.current_rect={min:{x:c.x,y:c.y},max:{x:c.x+l.WIDTH,y:c.y+l.HEIGHT}};var o=e.getContext("2d");e.width=r,e.height=n,e.style.backgroundImage='url("'+i+'")',e.style.backgroundSize="100%",o.fillStyle="rgba(0, 0, 0, 0.4)",o.strokeStyle="red",e.addEventListener("mousedown",function(t){return u.onMouseDown(t,e,o)},!1),e.addEventListener("mouseup",function(t){return u.onMouseUp(t,e,o)},!1),e.addEventListener("mousemove",function(t){return u.onMouseMove(t,e,o)},!1),this.draw(e,o)}return(0,c.default)(t,[{key:"resolveRect",value:function(){this.current_rect.min.x<0&&(this.current_rect.max.x-=this.current_rect.min.x,this.current_rect.min.x=0),this.current_rect.min.y<0&&(this.current_rect.max.y-=this.current_rect.min.y,this.current_rect.min.y=0),this.current_rect.max.x>this.width&&(this.current_rect.min.x-=this.current_rect.max.x-this.width,this.current_rect.max.x=this.width),this.current_rect.max.y>this.height&&(this.current_rect.min.y-=this.current_rect.max.y-this.height,this.current_rect.max.y=this.height)}},{key:"setScale",value:function(t){this.width*t<l.WIDTH&&(t=l.WIDTH/this.width),this.height*t<l.HEIGHT&&(t=l.HEIGHT/this.height);var e=this.current_rect.max.x-this.current_rect.min.x,r=this.current_rect.max.y-this.current_rect.min.y,n=this.current_rect.min.x+e/2,i=this.current_rect.min.y+r/2,a=l.WIDTH*(1/t)/2,u=l.HEIGHT*(1/t)/2;this.current_rect={min:{x:n-a,y:i-u},max:{x:n+a,y:i+u}},this.resolveRect()}},{key:"onMouseDown",value:function(t,e,r){if(!this.dragging){var n=this.constructor.getPoint(t,e),i=n.x,a=n.y;this.current_rect.min.x<=i&&i<=this.current_rect.max.x&&this.current_rect.min.y<=a&&a<=this.current_rect.max.y&&(this.dragging=!0,this.begin_point={x:i-this.current_rect.min.x,y:a-this.current_rect.min.y})}}},{key:"onMouseUp",value:function(t,e,r){this.dragging=!1}},{key:"onMouseMove",value:function(t,e,r){if(this.dragging){var n=this.constructor.getPoint(t,e),i=n.x,a=n.y,u={x:i-this.begin_point.x,y:a-this.begin_point.y};this.current_rect={min:u,max:{x:this.current_rect.max.x-(this.current_rect.min.x-u.x),y:this.current_rect.max.y-(this.current_rect.min.y-u.y)}},this.current_rect.min.x<0&&(this.begin_point.x=i),this.current_rect.max.x>this.width&&(this.begin_point.x=i-(this.width-(this.current_rect.max.x-this.current_rect.min.x))),this.current_rect.min.y<0&&(this.begin_point.y=a),this.current_rect.max.y>this.height&&(this.begin_point.y=a-(this.height-(this.current_rect.max.y-this.current_rect.min.y))),this.resolveRect(),this.draw(e,r)}}},{key:"draw",value:function(t,e){e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),e.clearRect(this.current_rect.min.x,this.current_rect.min.y,this.current_rect.max.x-this.current_rect.min.x,this.current_rect.max.y-this.current_rect.min.y),e.strokeRect(this.current_rect.min.x,this.current_rect.min.y,this.current_rect.max.x-this.current_rect.min.x,this.current_rect.max.y-this.current_rect.min.y),this.preview&&this.preview.update(this.rect)}},{key:"rect",get:function(){return{min:{x:this.current_rect.min.x/this.width,y:this.current_rect.min.y/this.height},max:{x:this.current_rect.max.x/this.width,y:this.current_rect.max.y/this.height}}}}],[{key:"getPoint",value:function(t,e){return{x:parseInt(t.clientX-e.offsetLeft),y:parseInt(t.clientY-e.offsetTop)}}}]),t}(),h=function(){function t(e,r,n,i){(0,s.default)(this,t),this.scale=1,this.width=r,this.height=n,this.img=e;var a=e.parentElement;a.style.width=l.WIDTH+"px",a.style.height=l.HEIGHT+"px",e.src=i,e.width=r,e.height=n}return(0,c.default)(t,[{key:"update",value:function(t){var e=l.WIDTH/(this.width*(t.max.x-t.min.x));this.scale!==e&&(this.scale=e,this.img.width=this.width*e,this.img.height=this.height*e),this.img.style.left="-"+this.img.width*t.min.x+"px",this.img.style.top="-"+this.img.height*t.min.y+"px"}}]),t}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,r){for(var n=atob((void 0).toDataURL(e,r).split(",")[1]),i=n.length,a=new Uint8Array(i),u=0;u<i;u++)a[u]=n.charCodeAt(u);t(new Blob([a],{type:e||"image/png"}))}}),e.default={data:function(){return{title:null,description:null}},methods:{reset:function(){this._img_data=null,this._img_url&&URL.revokeObjectURL(this._img_url)},onChangeFile:function(t){var e=this,r=t.target.files;if(0!==r.length){var n=r[0];if("image"===n.type.split("/",2)[0]){this.reset();var i=this,s=new FileReader;s.readAsDataURL(n),s.onload=(0,u.default)(a.default.mark(function r(){var n;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(n=new Image).src=s.result,n.onload=(0,u.default)(a.default.mark(function r(){var u,s,c,o;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=e.resolveSize(n.width,n.height,250,250),s=u.width,c=u.height,r.next=3,e.resize(n,1280);case 3:i._img_data=r.sent,i._img_url=URL.createObjectURL(i._img_data),o=new h(t.target.previousElementSibling.children[1].children[0],s,c,i._img_url),e._thumbnail_view=new d(t.target.previousElementSibling.children[0],s,c,i._img_url,o);case 7:case"end":return r.stop()}},r,e)}));case 3:case"end":return r.stop()}},r,e)}))}}},resolveSize:function(t,e,r,n){var i=function(r,n){var i=n(r(t,e));t*=i,e*=i};return r&&i(Math.max,function(t){return t>r?r/t:1}),n&&i(Math.min,function(t){return t<n?n/t:1}),{width:t,height:e}},resize:function(t,e,r){var n=this;return(0,u.default)(a.default.mark(function u(){var s,c,o,l;return a.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=n.resolveSize(t.width,t.height,e),c=s.width,o=s.height,r=r||document.createElement("canvas"),l=r.getContext("2d"),r.width=c,r.height=o,l.drawImage(t,0,0,c,o),a.abrupt("return",new i.default(function(t,e){r.toBlob(t,"image/jpeg",.6)}));case 7:case"end":return a.stop()}},u,n)}))()},submit:function(t){var e=new FormData;e.append("title",this.title),e.append("description",this.description),e.append("file",this._img_data),o.default.postMediaData(e)}},destroyed:function(){this.reset()}}},s9ae:function(t,e,r){"use strict";var n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"index"}},[t._v("\n\tIndex "),r("br"),t._v("\n\troute name: "+t._s(t.$route.name)),r("br"),t._v("\n\troute path: "+t._s(t.$route.path)),r("br"),t._v("\n\troute params: "+t._s(t.$route.params[0])),r("br"),t._v(" "),t._l(t.posts,function(e){return r("div",{staticClass:"thumb",on:{click:function(r){t.selectMedia(e)}}},[r("img",{attrs:{src:t.getThumbnailUrl(e)}})])}),t._v(" "),r("div",{staticClass:"clear"})],2)},staticRenderFns:[]};e.a=n},"t/xc":function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r("Xxa5")),a=n(r("exGp")),u=n(r("oiih")),s=n(r("gyMJ"));e.default={name:"index",data:function(){return{posts:[]}},methods:{getThumbnailUrl:function(t){return u.default.static_url+t.id},selectMedia:function(t){this.$router.push({path:"/media/"+t.id}),this.$store.commit("MediaView/setData",t)}},beforeCreate:function(){var t=this;"index-view"===this.$route.name&&(0,a.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.commit("MediaView/setData",{id:t.$route.params[0]});case 1:case"end":return e.stop()}},e,t)}))();var e="";"index-search"===this.$route.name&&(e=this.$route.params[0]),(0,a.default)(i.default.mark(function r(){var n,a,u;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=[],r.next=3,s.default.getPosts(e);case 3:a=r.sent,u=a.data,a.error||(u.forEach(function(t){return n.push({id:t})}),t.posts=n);case 7:case"end":return r.stop()}},r,t)}))()}}},teIl:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("header",{attrs:{id:"app-header"}},[this._v("\n\tHeader\n\t"),e("nav",[e("router-link",{attrs:{to:"/"}},[this._v("Home")]),this._v(" "),e("router-link",{attrs:{to:"/upload"}},[this._v("Upload")]),this._v(" "),e("router-link",{attrs:{to:"/album"}},[this._v("Album")]),this._v(" "),e("router-link",{attrs:{to:"/settings"}},[this._v("Settings")]),this._v(" "),e("router-link",{attrs:{to:"/signin"}},[this._v("Signin")]),this._v(" "),e("router-link",{attrs:{to:"/signup"}},[this._v("Signup")])],1)])},staticRenderFns:[]},i=r("VU/8")(null,n,!1,null,null,null);e.default=i.exports},xJD8:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(r("h8cK")),a=n(r("teIl")),u=n(r("TVmP"));e.default={name:"app",components:{MediaView:i.default,AppHeader:a.default,AppFooter:u.default}}},yYi4:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"settings"}},[this._v("\n\tSettings\n")])},staticRenderFns:[]},i=r("VU/8")(null,n,!1,null,null,null);e.default=i.exports},zWi8:function(t,e,r){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header"),this._v(" "),e("router-view"),this._v(" "),e("media-view"),this._v(" "),e("app-footer")],1)},staticRenderFns:[]};e.a=n}},["NHnr"]);
//# sourceMappingURL=app.fa48fb13ff08556e1036.js.map